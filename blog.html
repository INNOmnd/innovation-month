<!doctype html>
<html lang="nl">
<head>
  <link rel="icon" type="image/png" href="casade-logo.png">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Casade Blog — Post</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>:root{--brand:#86BC25;--brand-dark:#5D7A15}</style>
</head>
<body class="bg-slate-50">
  <header class="sticky top-0 bg-white/90 backdrop-blur border-b border-slate-200 z-10">
    <div class="max-w-4xl mx-auto px-4 py-4 flex items-center gap-4">
      <img src="casade-logo.png" class="h-10" alt="Casade" />
      <h1 class="text-xl font-bold" style="color:var(--brand)">Innovatie Blog</h1>
      <nav class="ml-auto text-sm flex gap-6">
        <a href="index.html" class="hover:underline">Home</a>
        <a href="planning.html" class="hover:underline">Planning</a>
      </nav>
    </div>
  </header>

  <!-- Banner -->
  <div id="bannerWrap" class="bg-slate-200">
    <img id="banner" class="w-full h-56 sm:h-72 object-cover" alt="">
  </div>

  <!-- Content -->
  <main class="max-w-4xl mx-auto px-4 py-8">
    <a href="blogs.html" class="inline-flex items-center gap-2 text-sm font-medium mb-6 px-3 py-2 rounded-full border border-slate-300 bg-white hover:bg-slate-50" style="color:var(--brand)">
      ← Terug naar blogs
    </a>

    <article id="post" class="bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden">
      <div class="p-6 sm:p-8">
        <p id="meta" class="text-xs text-slate-500"></p>
        <h1 id="title" class="mt-1 text-2xl sm:text-3xl font-bold leading-tight"></h1>
        <div id="content" class="prose max-w-none mt-5"></div>
      </div>
    </article>

    <div id="notFound" class="hidden text-center text-slate-600 mt-16">
      <p class="text-xl font-semibold">Deze blogpost is niet gevonden.</p>
      <p class="mt-2">Controleer de link of ga terug naar het <a href="blogs.html" class="underline" style="color:var(--brand)">overzicht</a>.</p>
    </div>
  </main>

  <!-- Load shared posts -->
  <script src="posts.js"></script>

  <script>
    const $ = sel => document.querySelector(sel);
    const id = new URLSearchParams(location.search).get('id');

    function formatDate(iso){
      if(!iso) return '';
      const d = new Date(iso);
      return isNaN(d) ? iso : d.toLocaleDateString('nl-NL', {year:'numeric', month:'long', day:'numeric'});
    }

    function toParagraphs(content){
      // Accept array OR string with blank lines.
      if(Array.isArray(content)) return content;
      if(typeof content === 'string') return content.split(/\n{2,}/);
      return [];
    }

    function renderPost(){
      const list = window.POSTS || [];
      const post = list.find(p => String(p.id) === String(id));
      if(!post){
        $('#post').classList.add('hidden');
        $('#notFound').classList.remove('hidden');
        document.title = 'Casade Blog — Niet gevonden';
        return;
      }

      // Title & head
      document.title = `Casade Blog — ${post.title}`;

      // Banner
      const banner = $('#banner');
      banner.src = post.banner;
      banner.alt = `Banner: ${post.title}`;

      // Meta + Title
      $('#meta').textContent = [post.company, formatDate(post.date)].filter(Boolean).join(' • ');
      $('#title').textContent = post.title;

      // Body
      const contentWrap = $('#content');
      contentWrap.innerHTML = '';
      toParagraphs(post.content).forEach(txt => {
        const p = document.createElement('p');
        p.textContent = (txt || '').trim();
        if(p.textContent) contentWrap.appendChild(p);
      });
    }

    renderPost();
  </script>
</body>
</html>
