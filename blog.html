<!doctype html>
<html lang="en">
<head>
  <link rel="icon" type="image/png" href="casade-logo.png">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Casade Blog — INNOvember</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>:root{--brand:#86BC25;--brand-dark:#5D7A15}</style>
</head>
<body class="bg-slate-50">
  <header class="sticky top-0 bg-white/90 backdrop-blur border-b border-slate-200">
    <div class="max-w-6xl mx-auto px-4 py-4 flex items-center gap-3">
      <a href="index.html" aria-label="Naar home" class="flex items-center shrink-0">
        <img src="casade-logo.svg" class="h-16 w-auto block" alt="Casade" height="64" decoding="async" />
      </a>
      <h1 class="text-xl font-bold flex items-center" style="color:var(--brand)">Innovatie Blog</h1>
      <nav class="ml-auto text-sm flex gap-6">
        <a href="index.html" class="hover:underline">Home</a>
        <a href="planning.html" class="hover:underline">Planning</a>
      </nav>
    </div>
  </header>

  <main class="max-w-6xl mx-auto px-4 py-8">
    <div class="flex items-center justify-between gap-4 flex-wrap mb-6">
      <input id="search" type="search" placeholder="Zoek blog posts…" class="grow min-w-[260px] rounded-xl border border-slate-300 px-4 py-2 bg-white" />
      <label class="text-sm text-slate-600">Sorteer
        <select id="sort" class="ml-2 rounded-xl border border-slate-300 px-3 py-2 bg-white">
          <option value="date_desc">Nieuwste</option>
          <option value="date_asc">Oudste</option>
          <option value="title_asc">Titel A→Z</option>
        </select>
      </label>
    </div>

    <section id="feed" class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3"></section>

    <template id="cardTpl">
      <article class="bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden flex flex-col">
        <img data-banner class="h-40 w-full object-cover" alt="Banner" />
        <div class="p-4 flex-1">
          <h2 data-title class="text-lg font-semibold leading-snug"></h2>
          <p data-summary class="mt-2 text-sm text-slate-600 line-clamp-3"></p>
          <p class="mt-3 text-xs text-slate-500">Bedrijf: <span data-company></span></p>
        </div>
        <div class="p-4 pt-0">
          <a data-link href="#" class="inline-flex items-center gap-2 text-sm font-medium hover:underline" style="color:var(--brand)">Lees post →</a>
        </div>
      </article>
    </template>
  </main>

  <!-- shared posts -->
  <script src="posts.js"></script>

  <script>
    const feed=document.getElementById('feed');
    const tpl=document.getElementById('cardTpl');
    const search=document.getElementById('search');
    const sort=document.getElementById('sort');

    function render(){
      feed.innerHTML='';
      let items=(window.POSTS||[]).slice();
      const q=(search.value||'').toLowerCase();
      if(q) items=items.filter(p=>
        (p.title||'').toLowerCase().includes(q) ||
        (p.summary||'').toLowerCase().includes(q) ||
        (p.company||'').toLowerCase().includes(q)
      );
      const s=sort.value;
      if(s==='date_desc') items.sort((a,b)=>new Date(b.date)-new Date(a.date));
      if(s==='date_asc') items.sort((a,b)=>new Date(a.date)-new Date(b.date));
      if(s==='title_asc') items.sort((a,b)=>String(a.title).localeCompare(String(b.title)));

      items.forEach(p=>{
        const node=tpl.content.cloneNode(true);
        node.querySelector('[data-title]').textContent=p.title||'';
        node.querySelector('[data-summary]').textContent=p.summary||'';
        node.querySelector('[data-company]').textContent=p.company||'';
        node.querySelector('[data-banner]').src=p.banner;
        node.querySelector('[data-banner]').alt=`Banner: ${p.title||''}`;
        node.querySelector('[data-link]').href=`post.html?id=${encodeURIComponent(p.id)}`;
        feed.appendChild(node);
      });
    }
    search.addEventListener('input',render);
    sort.addEventListener('change',render);
    render();
  </script>
</body>
</html>
