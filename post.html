<!doctype html>
<html lang="nl">
<head>
  <link rel="icon" type="image/svg" href="pictures/beeldmerk-casade-transp.svg">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Casade Leesvoer — Post</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{--brand:#86BC25;--brand-dark:#5D7A15}

    /* Sticky-footer layout */
    html,body{height:100%}
    .page{min-height:100%; min-height:100dvh; display:flex; flex-direction:column}
    .grow-main{flex:1}

    /* Active nav */
    .nav-link[aria-current="page"]{
      color: var(--brand);
      text-decoration: underline;
      text-underline-offset: 4px;
    }
    .nav-link[aria-current="page"]:hover{ color: var(--brand) !important; }

    /* Animated underline on hover */
    .link-underline{
      background-image:linear-gradient(currentColor,currentColor);
      background-repeat:no-repeat;background-position:0 100%;
      background-size:0% 2px;transition:background-size .25s ease
    }
    .link-underline:hover{background-size:100% 2px}
  </style>
</head>
<body class="bg-slate-50">
<div class="page">
  <!-- Header -->
  <header class="sticky top-0 bg-white/90 backdrop-blur border-b border-slate-200 z-10 relative">
    <!-- brand line -->
    <div class="absolute inset-x-0 top-0 h-1" style="background:linear-gradient(90deg,#86BC25,#5D7A15)"></div>

    <div class="max-w-4xl mx-auto px-4 py-4 flex items-center gap-4">
      <a href="index.html" aria-label="Naar home" class="shrink-0">
        <img src="casade-logo.svg" class="h-16 w-auto block" alt="Casade" height="64" decoding="async" />
      </a>
      <h1 class="text-xl font-bold" style="color:var(--brand)">Innovatie Leesvoer</h1>
      <nav class="ml-auto text-sm flex gap-6">
        <a href="index.html" class="nav-link link-underline hover:text-slate-900">Home</a>
        <a href="blog.html" class="nav-link link-underline hover:text-slate-900">Leesvoer</a>
        <a href="planning.html" class="nav-link link-underline hover:text-slate-900">Planning</a>
      </nav>
    </div>
  </header>

  <!-- Banner -->
  <div class="bg-slate-200">
    <img id="banner" class="w-full h-56 sm:h-72 object-cover" alt="">
  </div>

  <!-- Content -->
  <main class="grow-main max-w-4xl mx-auto px-4 py-8">
    <a href="blog.html" class="inline-flex items-center gap-2 text-sm font-medium mb-6 px-3 py-2 rounded-full border border-slate-300 bg-white hover:bg-slate-50" style="color:var(--brand)">
      ← Terug naar leesvoer
    </a>

    <article id="post" class="bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden">
      <div class="p-6 sm:p-8">
        <p id="meta" class="text-xs text-slate-500"></p>
        <h1 id="title" class="mt-1 text-2xl sm:text-3xl font-bold leading-tight"></h1>
        <div id="content" class="prose max-w-none mt-5"></div>
      </div>
    </article>

    <div id="notFound" class="hidden text-center text-slate-600 mt-16">
      <p class="text-xl font-semibold">Deze post is niet gevonden.</p>
      <p class="mt-2">Ga terug naar het <a href="blog.html" class="underline" style="color:var(--brand)">overzicht</a>.</p>
    </div>
  </main>

  <footer class="border-t border-slate-200 py-10">
    <div class="max-w-4xl mx-auto px-4 text-sm text-slate-600">
      © 2025 Casade — INNOvember
    </div>
  </footer>
</div>

<!-- shared posts -->
<script src="posts.js"></script>

<script>
  const $ = s => document.querySelector(s);
  const id = new URLSearchParams(location.search).get('id');

  function formatDate(iso){
    if(!iso) return '';
    const d = new Date(iso);
    return isNaN(d) ? iso : d.toLocaleDateString('nl-NL', {year:'numeric', month:'long', day:'numeric'});
  }

  // Simple block renderer (p, h2, hr)
  function renderBlocks(blocks, container){
    container.innerHTML = '';
    (blocks || []).forEach(b => {
      if (typeof b === 'string') {
        const p = document.createElement('p');
        p.textContent = b.trim();
        if (p.textContent) container.appendChild(p);
        return;
      }
      if (b && b.type === 'h2') {
        const h = document.createElement('h2');
        h.className = 'text-xl sm:text-2xl font-semibold mt-8';
        h.textContent = b.text || '';
        container.appendChild(h);
        return;
      }
      if (b && b.type === 'hr') {
        const hr = document.createElement('hr');
        hr.className = 'my-6 border-slate-200';
        container.appendChild(hr);
        return;
      }
      const p = document.createElement('p');
      p.textContent = String(b || '').trim();
      if (p.textContent) container.appendChild(p);
    });
  }

  function render(){
    const list = window.POSTS || [];
    const post = list.find(p => String(p.id) === String(id));
    if(!post){
      $('#post').classList.add('hidden');
      $('#notFound').classList.remove('hidden');
      document.title = 'Casade Blog — Niet gevonden';
      return;
    }

    const shortTab = post.tab || post.company || (post.title || '').split('—')[0].trim() || 'Casade Leesvoer';
    document.title = `Casade Leesvoer — ${shortTab}`;
    const banner = $('#banner');
    banner.src = post.banner;
    banner.alt = `Banner: ${post.title}`;

    $('#meta').textContent = [post.company, formatDate(post.date)].filter(Boolean).join(' • ');
    $('#title').textContent = post.title;

    renderBlocks(post.content, $('#content'));
  }
  render();
</script>

<script>
  // Active nav; special case: post.html -> mark Blog
  (() => {
    const here = (location.pathname.split('/').pop() || 'index.html').toLowerCase();
    document.querySelectorAll('.nav-link').forEach(a => {
      const target = (a.getAttribute('href') || '').split('/').pop().toLowerCase();
      let isActive = target === here;
      if (!isActive && here.startsWith('post.html') && target === 'blog.html') isActive = true;
      if (isActive) a.setAttribute('aria-current', 'page');
    });
  })();
</script>
</body>
</html>
